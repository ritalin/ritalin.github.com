---
layout: post
title: "Rhino.Mocks tips"
date: 2012-12-20 21:27
comments: true
categories: c# tdd
---
いくつか引っかかったので、忘れないうちにメモとして残しとく。

## プロパティをモック
具象クラスのモックを作る場合、対象のメソッドやプロパティをvirtualにする必要がある。
モック目的のためだけにvirtualにするのは気が重い。

この場合、インターフェースを切り出し、インターフェースからモック作れば心配無用。
モックから戻り値を取得するためにReturnやDoも必要。

## NUnitで使う際の注意点
* 連続実行したとき、2つ目以降のテストケースが失敗する

Rhino.Mocksに限らないが、フィールドの初期化子でインスタンス化した場合に発生。
必ずSetUp属性、FixtureSetpu属性、または各テストコード内で初期化すること。

GOOS本(p.26)にもちゃんと書かれてる。
